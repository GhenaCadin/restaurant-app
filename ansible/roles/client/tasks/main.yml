---
# - hosts: client
#   become: true
#   tasks:
    - name: Install Docker
      apt:
        name: docker.io
        state: present
        update_cache: yes

    - name: Pull client Docker image
      docker_image:
        name: pablop115/client
        source: pull
        tag: latest
      when: inventory_hostname == 'client_front'  

    - name: Run client service
      docker_container:
        name: client
        image: pablop115/client:latest #Change with the actuall docker image
        ports:
          - "90:80" # you connect the port 90 of your EC2 instance to the port 80 of your container
        state: started
      when: inventory_hostname == 'client_front'